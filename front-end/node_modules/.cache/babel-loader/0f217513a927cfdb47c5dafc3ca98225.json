{"ast":null,"code":"import _objectSpread from\"/home/vuphan/Projects/containers/front-end/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect}from'react';import{useForm}from\"react-hook-form\";import{yupResolver}from'@hookform/resolvers/yup';import*as yup from\"yup\";import{useDispatch,useSelector}from'react-redux';import{fetchLogin}from'../../freatures/auth/authSlice';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var schema=yup.object({email:yup.string().email('Must be a valid email').max(255).required('Email is required'),password:yup.string().max(255).required('Password is required')}).required();var LoginPage=function LoginPage(){var _errors$email,_errors$password;var navigate=useNavigate();var dispatch=useDispatch();var loginStatus=useSelector(function(state){return state.auth.status;});var currentUser=useSelector(function(state){return state.auth.currentUser;});var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;useEffect(function(){if(loginStatus==\"succeeded\"){localStorage.setItem('username',currentUser.username);return navigate(\"/\");}},[loginStatus]);var onSubmit=function onSubmit(data){dispatch(fetchLogin(JSON.stringify(data)));};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-sm  shadow p-5 \",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"LCS\"}),loginStatus==\"failed\"?/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:\"Incorrect email or password!\"}):\"\",/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",className:\"form-label\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"email\")),{},{type:\"email\",className:\"form-control\",\"aria-describedby\":\"emailHelp\",required:true})),/*#__PURE__*/_jsx(\"p\",{children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"password\")),{},{type:\"password\",className:\"form-control\",required:true})),/*#__PURE__*/_jsx(\"p\",{children:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 d-flex\",children:/*#__PURE__*/_jsx(\"button\",{id:\"submit\",type:\"submit\",className:\"btn btn-outline-success w-100\",children:loginStatus=='loading'?'Logging...':'Login'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/forgotpassword\",className:\"info\",children:\"Forgot password\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/register\",className:\"info\",children:\"Create an account\"})]})]})]});};export default LoginPage;","map":{"version":3,"names":["React","useEffect","useForm","yupResolver","yup","useDispatch","useSelector","fetchLogin","useNavigate","schema","object","email","string","max","required","password","LoginPage","navigate","dispatch","loginStatus","state","auth","status","currentUser","resolver","register","handleSubmit","errors","formState","localStorage","setItem","username","onSubmit","data","JSON","stringify","color","message"],"sources":["/home/vuphan/Projects/containers/front-end/src/components/pages/LoginPage.jsx"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from \"yup\";\nimport { useDispatch, useSelector  } from 'react-redux';\nimport { fetchLogin, } from '../../freatures/auth/authSlice';\nimport { useNavigate  } from 'react-router-dom';\n\n\nconst schema = yup.object({\n  email: yup.string().email('Must be a valid email').max(255).required('Email is required'),\n  password: yup.string().max(255).required('Password is required'),\n}).required();\n\nconst LoginPage = () => {\n  let navigate = useNavigate();\n  const dispatch = useDispatch();\n  const loginStatus = useSelector(state=>state.auth.status);\n  const currentUser = useSelector(state=>state.auth.currentUser);\n  const { register, handleSubmit, formState:{ errors } } = useForm({\n    resolver: yupResolver(schema)\n  });\n  useEffect(()=>{\n    if(loginStatus == \"succeeded\"){\n      localStorage.setItem('username',currentUser.username)\n      return navigate(\"/\");\n    }\n    \n  },[loginStatus])\n  const onSubmit = (data) => {\n    dispatch(fetchLogin(JSON.stringify(data)));\n  };\n  return (\n    <div className=\"container-sm  shadow p-5 \" >\n        <h2>LCS</h2>\n        {(loginStatus == \"failed\")?<p style={{color: \"red\"}}>Incorrect email or password!</p>:\"\" }\n        <form onSubmit={handleSubmit(onSubmit)} >\n            <div className=\"mb-3\">\n              <label htmlFor=\"exampleInputEmail1\" className=\"form-label\">Email address</label>\n              <input {...register(\"email\")} type=\"email\" className=\"form-control\"  aria-describedby=\"emailHelp\"  required/>\n              <p>{errors.email?.message}</p>\n            </div>\n            <div className=\"mb-3\">\n              <label htmlFor=\"exampleInputPassword1\" className=\"form-label\">Password</label>\n              <input {...register(\"password\")} type=\"password\" className=\"form-control\"   required/>\n              <p>{errors.password?.message}</p>\n            </div>\n            <div className=\"mb-3 d-flex\" >\n              <button id=\"submit\" type=\"submit\" className=\"btn btn-outline-success w-100\">{loginStatus=='loading'?'Logging...':'Login'}</button>\n\n            </div>\n            <div className=\"mb-3 d-flex justify-content-between\" >\n              <a href=\"/forgotpassword\" className=\"info\">Forgot password</a>\n              <a href=\"/register\" className=\"info\">Create an account</a>\n            </div>\n            \n            \n          </form>\n    </div>\n  )\n}\n\nexport default LoginPage"],"mappings":"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"},"metadata":{},"sourceType":"module"}