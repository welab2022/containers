{"ast":null,"code":"var _jsxFileName = \"/home/vuphan/Projects/containers/front-end/src/components/pages/LoginPage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from \"yup\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchLogin } from '../../freatures/auth/authSlice';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({\n  email: yup.string().email('Must be a valid email').max(255).required('Email is required'),\n  password: yup.string().max(255).required('Password is required')\n}).required();\n\nconst LoginPage = () => {\n  _s();\n\n  var _errors$email, _errors$password;\n\n  let navigate = useNavigate();\n  const dispatch = useDispatch();\n  const loginStatus = useSelector(state => state.auth.status);\n  const currentUser = useSelector(state => state.auth.currentUser);\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  useEffect(() => {\n    if (loginStatus == \"succeeded\") {\n      localStorage.setItem('username', currentUser.username);\n      return navigate(\"/\");\n    }\n  }, [loginStatus]);\n\n  const onSubmit = data => {\n    dispatch(fetchLogin(JSON.stringify(data)));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-sm  shadow p-5 \",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"LCS\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }, this), loginStatus == \"failed\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: \"Incorrect email or password!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 36\n    }, this) : \"\", /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"exampleInputEmail1\",\n          className: \"form-label\",\n          children: \"Email address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...register(\"email\"),\n          type: \"email\",\n          className: \"form-control\",\n          \"aria-describedby\": \"emailHelp\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"exampleInputPassword1\",\n          className: \"form-label\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...register(\"password\"),\n          type: \"password\",\n          className: \"form-control\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3 d-flex\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"submit\",\n          type: \"submit\",\n          className: \"btn btn-outline-success w-100\",\n          children: loginStatus == 'loading' ? 'Logging...' : 'Login'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3 d-flex justify-content-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/forgotpassword\",\n          className: \"info\",\n          children: \"Forgot password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/register\",\n          className: \"info\",\n          children: \"Create an account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n};\n\n_s(LoginPage, \"Qg+gMxwjxSohAq+0+oB0a7nBQYM=\", false, function () {\n  return [useNavigate, useDispatch, useSelector, useSelector, useForm];\n});\n\n_c = LoginPage;\nexport default LoginPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useEffect","useForm","yupResolver","yup","useDispatch","useSelector","fetchLogin","useNavigate","schema","object","email","string","max","required","password","LoginPage","navigate","dispatch","loginStatus","state","auth","status","currentUser","register","handleSubmit","formState","errors","resolver","localStorage","setItem","username","onSubmit","data","JSON","stringify","color","message"],"sources":["/home/vuphan/Projects/containers/front-end/src/components/pages/LoginPage.jsx"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from \"yup\";\nimport { useDispatch, useSelector  } from 'react-redux';\nimport { fetchLogin, } from '../../freatures/auth/authSlice';\nimport { useNavigate  } from 'react-router-dom';\n\n\nconst schema = yup.object({\n  email: yup.string().email('Must be a valid email').max(255).required('Email is required'),\n  password: yup.string().max(255).required('Password is required'),\n}).required();\n\nconst LoginPage = () => {\n  let navigate = useNavigate();\n  const dispatch = useDispatch();\n  const loginStatus = useSelector(state=>state.auth.status);\n  const currentUser = useSelector(state=>state.auth.currentUser);\n  const { register, handleSubmit, formState:{ errors } } = useForm({\n    resolver: yupResolver(schema)\n  });\n  useEffect(()=>{\n    if(loginStatus == \"succeeded\"){\n      localStorage.setItem('username',currentUser.username)\n      return navigate(\"/\");\n    }\n    \n  },[loginStatus])\n  const onSubmit = (data) => {\n    dispatch(fetchLogin(JSON.stringify(data)));\n  };\n  return (\n    <div className=\"container-sm  shadow p-5 \" >\n        <h2>LCS</h2>\n        {(loginStatus == \"failed\")?<p style={{color: \"red\"}}>Incorrect email or password!</p>:\"\" }\n        <form onSubmit={handleSubmit(onSubmit)} >\n            <div className=\"mb-3\">\n              <label htmlFor=\"exampleInputEmail1\" className=\"form-label\">Email address</label>\n              <input {...register(\"email\")} type=\"email\" className=\"form-control\"  aria-describedby=\"emailHelp\"  required/>\n              <p>{errors.email?.message}</p>\n            </div>\n            <div className=\"mb-3\">\n              <label htmlFor=\"exampleInputPassword1\" className=\"form-label\">Password</label>\n              <input {...register(\"password\")} type=\"password\" className=\"form-control\"   required/>\n              <p>{errors.password?.message}</p>\n            </div>\n            <div className=\"mb-3 d-flex\" >\n              <button id=\"submit\" type=\"submit\" className=\"btn btn-outline-success w-100\">{loginStatus=='loading'?'Logging...':'Login'}</button>\n\n            </div>\n            <div className=\"mb-3 d-flex justify-content-between\" >\n              <a href=\"/forgotpassword\" className=\"info\">Forgot password</a>\n              <a href=\"/register\" className=\"info\">Create an account</a>\n            </div>\n            \n            \n          </form>\n    </div>\n  )\n}\n\nexport default LoginPage"],"mappings":"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"},"metadata":{},"sourceType":"module"}